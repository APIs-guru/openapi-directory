openapi: 3.0.0
info:
  version: '2019-11-02'
  x-release: v4
  title: Amazon Elastic Block Store
  description: '<p>You can use the Amazon Elastic Block Store (Amazon EBS) direct APIs to create Amazon EBS snapshots, write data directly to your snapshots, read data on your snapshots, and identify the differences or changes between two snapshots. If youâ€™re an independent software vendor (ISV) who offers backup services for Amazon EBS, the EBS direct APIs make it more efficient and cost-effective to track incremental changes on your Amazon EBS volumes through snapshots. This can be done without having to create new volumes from snapshots, and then use Amazon Elastic Compute Cloud (Amazon EC2) instances to compare the differences.</p> <p>You can create incremental snapshots directly from data on-premises into volumes and the cloud to use for quick disaster recovery. With the ability to write and read snapshots, you can write your on-premises data to an snapshot during a disaster. Then after recovery, you can restore it back to Amazon Web Services or on-premises from the snapshot. You no longer need to build and maintain complex mechanisms to copy data to and from Amazon EBS.</p> <p>This API reference provides detailed information about the actions, data types, parameters, and errors of the EBS direct APIs. For more information about the elements that make up the EBS direct APIs, and examples of how to use them effectively, see <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-accessing-snapshot.html">Accessing the Contents of an Amazon EBS Snapshot</a> in the <i>Amazon Elastic Compute Cloud User Guide</i>. For more information about the supported Amazon Web Services Regions, endpoints, and service quotas for the EBS direct APIs, see <a href="https://docs.aws.amazon.com/general/latest/gr/ebs-service.html">Amazon Elastic Block Store Endpoints and Quotas</a> in the <i>Amazon Web Services General Reference</i>.</p>'
  x-logo:
    url: 'https://twitter.com/awscloud/profile_image?size=original'
    backgroundColor: '#FFFFFF'
  termsOfService: 'https://aws.amazon.com/service-terms/'
  contact:
    name: Mike Ralphson
    email: mike.ralphson@gmail.com
    url: 'https://github.com/mermade/aws2openapi'
    x-twitter: PermittedSoc
  license:
    name: Apache 2.0 License
    url: 'http://www.apache.org/licenses/'
  x-providerName: amazonaws.com
  x-serviceName: ebs
  x-origin:
    - contentType: application/json
      url: 'https://raw.githubusercontent.com/aws/aws-sdk-js/master/apis/ebs-2019-11-02.normal.json'
      converter:
        url: 'https://github.com/mermade/aws2openapi'
        version: 1.0.0
      x-apisguru-driver: external
  x-apiClientRegistration:
    url: 'https://portal.aws.amazon.com/gp/aws/developer/registration/index.html?nc2=h_ct'
  x-apisguru-categories:
    - cloud
  x-preferred: true
externalDocs:
  description: Amazon Web Services documentation
  url: 'https://docs.aws.amazon.com/ebs/'
servers:
  - url: 'http://ebs.{region}.amazonaws.com'
    variables:
      region:
        description: The AWS region
        enum:
          - us-east-1
          - us-east-2
          - us-west-1
          - us-west-2
          - us-gov-west-1
          - us-gov-east-1
          - ca-central-1
          - eu-north-1
          - eu-west-1
          - eu-west-2
          - eu-west-3
          - eu-central-1
          - eu-south-1
          - af-south-1
          - ap-northeast-1
          - ap-northeast-2
          - ap-northeast-3
          - ap-southeast-1
          - ap-southeast-2
          - ap-east-1
          - ap-south-1
          - sa-east-1
          - me-south-1
        default: us-east-1
    description: The Amazon EBS multi-region endpoint
  - url: 'https://ebs.{region}.amazonaws.com'
    variables:
      region:
        description: The AWS region
        enum:
          - us-east-1
          - us-east-2
          - us-west-1
          - us-west-2
          - us-gov-west-1
          - us-gov-east-1
          - ca-central-1
          - eu-north-1
          - eu-west-1
          - eu-west-2
          - eu-west-3
          - eu-central-1
          - eu-south-1
          - af-south-1
          - ap-northeast-1
          - ap-northeast-2
          - ap-northeast-3
          - ap-southeast-1
          - ap-southeast-2
          - ap-east-1
          - ap-south-1
          - sa-east-1
          - me-south-1
        default: us-east-1
    description: The Amazon EBS multi-region endpoint
  - url: 'http://ebs.{region}.amazonaws.com.cn'
    variables:
      region:
        description: The AWS region
        enum:
          - cn-north-1
          - cn-northwest-1
        default: cn-north-1
    description: The Amazon EBS endpoint for China (Beijing) and China (Ningxia)
  - url: 'https://ebs.{region}.amazonaws.com.cn'
    variables:
      region:
        description: The AWS region
        enum:
          - cn-north-1
          - cn-northwest-1
        default: cn-north-1
    description: The Amazon EBS endpoint for China (Beijing) and China (Ningxia)
x-hasEquivalentPaths: true
paths:
  '/snapshots/completion/{snapshotId}#x-amz-ChangedBlocksCount':
    post:
      operationId: CompleteSnapshot
      description: Seals and completes the snapshot after all of the required blocks of data have been written to it. Completing the snapshot changes the status to <code>completed</code>. You cannot write new blocks to a snapshot after it has been completed.
      responses:
        '202':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CompleteSnapshotResponse'
        '480':
          description: AccessDeniedException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccessDeniedException'
        '481':
          description: ValidationException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationException'
        '482':
          description: ResourceNotFoundException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResourceNotFoundException'
        '483':
          description: RequestThrottledException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RequestThrottledException'
        '484':
          description: ServiceQuotaExceededException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServiceQuotaExceededException'
        '485':
          description: InternalServerException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalServerException'
      parameters:
        - name: snapshotId
          in: path
          required: true
          description: The ID of the snapshot.
          schema:
            type: string
            pattern: '^snap-[0-9a-f]+$'
            minLength: 1
            maxLength: 64
        - name: x-amz-ChangedBlocksCount
          in: header
          required: true
          description: The number of blocks that were written to the snapshot.
          schema:
            type: integer
            minimum: 0
        - name: x-amz-Checksum
          in: header
          required: false
          description: '<p>An aggregated Base-64 SHA256 checksum based on the checksums of each written block.</p> <p>To generate the aggregated checksum using the linear aggregation method, arrange the checksums for each written block in ascending order of their block index, concatenate them to form a single string, and then generate the checksum on the entire string using the SHA256 algorithm.</p>'
          schema:
            type: string
            pattern: '^[A-Za-z0-9+/=]+$'
            maxLength: 64
        - name: x-amz-Checksum-Algorithm
          in: header
          required: false
          description: 'The algorithm used to generate the checksum. Currently, the only supported algorithm is <code>SHA256</code>.'
          schema:
            type: string
            enum:
              - SHA256
            pattern: '^[A-Za-z0-9]+$'
            maxLength: 32
        - name: x-amz-Checksum-Aggregation-Method
          in: header
          required: false
          description: 'The aggregation method used to generate the checksum. Currently, the only supported aggregation method is <code>LINEAR</code>.'
          schema:
            type: string
            enum:
              - LINEAR
            pattern: '^[A-Za-z0-9]+$'
            maxLength: 32
    parameters:
      - $ref: '#/components/parameters/X-Amz-Content-Sha256'
      - $ref: '#/components/parameters/X-Amz-Date'
      - $ref: '#/components/parameters/X-Amz-Algorithm'
      - $ref: '#/components/parameters/X-Amz-Credential'
      - $ref: '#/components/parameters/X-Amz-Security-Token'
      - $ref: '#/components/parameters/X-Amz-Signature'
      - $ref: '#/components/parameters/X-Amz-SignedHeaders'
  '/snapshots/{snapshotId}/blocks/{blockIndex}#blockToken':
    get:
      operationId: GetSnapshotBlock
      description: Returns the data in a block in an Amazon Elastic Block Store snapshot.
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetSnapshotBlockResponse'
        '480':
          description: AccessDeniedException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccessDeniedException'
        '481':
          description: ValidationException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationException'
        '482':
          description: ResourceNotFoundException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResourceNotFoundException'
        '483':
          description: RequestThrottledException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RequestThrottledException'
        '484':
          description: ServiceQuotaExceededException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServiceQuotaExceededException'
        '485':
          description: InternalServerException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalServerException'
      parameters:
        - name: snapshotId
          in: path
          required: true
          description: The ID of the snapshot containing the block from which to get data.
          schema:
            type: string
            pattern: '^snap-[0-9a-f]+$'
            minLength: 1
            maxLength: 64
        - name: blockIndex
          in: path
          required: true
          description: <p>The block index of the block from which to get data.</p> <p>Obtain the <code>BlockIndex</code> by running the <code>ListChangedBlocks</code> or <code>ListSnapshotBlocks</code> operations.</p>
          schema:
            type: integer
            minimum: 0
        - name: blockToken
          in: query
          required: true
          description: <p>The block token of the block from which to get data.</p> <p>Obtain the <code>BlockToken</code> by running the <code>ListChangedBlocks</code> or <code>ListSnapshotBlocks</code> operations.</p>
          schema:
            type: string
            pattern: '^[A-Za-z0-9+/=]+$'
            maxLength: 256
    parameters:
      - $ref: '#/components/parameters/X-Amz-Content-Sha256'
      - $ref: '#/components/parameters/X-Amz-Date'
      - $ref: '#/components/parameters/X-Amz-Algorithm'
      - $ref: '#/components/parameters/X-Amz-Credential'
      - $ref: '#/components/parameters/X-Amz-Security-Token'
      - $ref: '#/components/parameters/X-Amz-Signature'
      - $ref: '#/components/parameters/X-Amz-SignedHeaders'
  '/snapshots/{secondSnapshotId}/changedblocks':
    get:
      operationId: ListChangedBlocks
      description: Returns information about the blocks that are different between two Amazon Elastic Block Store snapshots of the same volume/snapshot lineage.
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListChangedBlocksResponse'
        '480':
          description: AccessDeniedException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccessDeniedException'
        '481':
          description: ValidationException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationException'
        '482':
          description: ResourceNotFoundException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResourceNotFoundException'
        '483':
          description: RequestThrottledException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RequestThrottledException'
        '484':
          description: ServiceQuotaExceededException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServiceQuotaExceededException'
        '485':
          description: InternalServerException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalServerException'
      parameters:
        - name: firstSnapshotId
          in: query
          required: false
          description: '<p>The ID of the first snapshot to use for the comparison.</p> <important> <p>The <code>FirstSnapshotID</code> parameter must be specified with a <code>SecondSnapshotId</code> parameter; otherwise, an error occurs.</p> </important>'
          schema:
            type: string
            pattern: '^snap-[0-9a-f]+$'
            minLength: 1
            maxLength: 64
        - name: secondSnapshotId
          in: path
          required: true
          description: '<p>The ID of the second snapshot to use for the comparison.</p> <important> <p>The <code>SecondSnapshotId</code> parameter must be specified with a <code>FirstSnapshotID</code> parameter; otherwise, an error occurs.</p> </important>'
          schema:
            type: string
            pattern: '^snap-[0-9a-f]+$'
            minLength: 1
            maxLength: 64
        - name: pageToken
          in: query
          required: false
          description: The token to request the next page of results.
          schema:
            type: string
            pattern: '^[A-Za-z0-9+/=]+$'
            maxLength: 256
        - name: maxResults
          in: query
          required: false
          description: The number of results to return.
          schema:
            type: integer
            minimum: 100
            maximum: 10000
        - name: startingBlockIndex
          in: query
          required: false
          description: <p>The block index from which the comparison should start.</p> <p>The list in the response will start from this block index or the next valid block index in the snapshots.</p>
          schema:
            type: integer
            minimum: 0
        - name: MaxResults
          in: query
          schema:
            type: string
          description: Pagination limit
          required: false
        - name: NextToken
          in: query
          schema:
            type: string
          description: Pagination token
          required: false
    parameters:
      - $ref: '#/components/parameters/X-Amz-Content-Sha256'
      - $ref: '#/components/parameters/X-Amz-Date'
      - $ref: '#/components/parameters/X-Amz-Algorithm'
      - $ref: '#/components/parameters/X-Amz-Credential'
      - $ref: '#/components/parameters/X-Amz-Security-Token'
      - $ref: '#/components/parameters/X-Amz-Signature'
      - $ref: '#/components/parameters/X-Amz-SignedHeaders'
  '/snapshots/{snapshotId}/blocks':
    get:
      operationId: ListSnapshotBlocks
      description: Returns information about the blocks in an Amazon Elastic Block Store snapshot.
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListSnapshotBlocksResponse'
        '480':
          description: AccessDeniedException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccessDeniedException'
        '481':
          description: ValidationException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationException'
        '482':
          description: ResourceNotFoundException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResourceNotFoundException'
        '483':
          description: RequestThrottledException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RequestThrottledException'
        '484':
          description: ServiceQuotaExceededException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServiceQuotaExceededException'
        '485':
          description: InternalServerException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalServerException'
      parameters:
        - name: snapshotId
          in: path
          required: true
          description: The ID of the snapshot from which to get block indexes and block tokens.
          schema:
            type: string
            pattern: '^snap-[0-9a-f]+$'
            minLength: 1
            maxLength: 64
        - name: pageToken
          in: query
          required: false
          description: The token to request the next page of results.
          schema:
            type: string
            pattern: '^[A-Za-z0-9+/=]+$'
            maxLength: 256
        - name: maxResults
          in: query
          required: false
          description: The number of results to return.
          schema:
            type: integer
            minimum: 100
            maximum: 10000
        - name: startingBlockIndex
          in: query
          required: false
          description: The block index from which the list should start. The list in the response will start from this block index or the next valid block index in the snapshot.
          schema:
            type: integer
            minimum: 0
        - name: MaxResults
          in: query
          schema:
            type: string
          description: Pagination limit
          required: false
        - name: NextToken
          in: query
          schema:
            type: string
          description: Pagination token
          required: false
    parameters:
      - $ref: '#/components/parameters/X-Amz-Content-Sha256'
      - $ref: '#/components/parameters/X-Amz-Date'
      - $ref: '#/components/parameters/X-Amz-Algorithm'
      - $ref: '#/components/parameters/X-Amz-Credential'
      - $ref: '#/components/parameters/X-Amz-Security-Token'
      - $ref: '#/components/parameters/X-Amz-Signature'
      - $ref: '#/components/parameters/X-Amz-SignedHeaders'
  '/snapshots/{snapshotId}/blocks/{blockIndex}#x-amz-Data-Length&x-amz-Checksum&x-amz-Checksum-Algorithm':
    put:
      operationId: PutSnapshotBlock
      description: '<p>Writes a block of data to a snapshot. If the specified block contains data, the existing data is overwritten. The target snapshot must be in the <code>pending</code> state.</p> <p>Data written to a snapshot must be aligned with 512-KiB sectors.</p>'
      responses:
        '201':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PutSnapshotBlockResponse'
        '480':
          description: AccessDeniedException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccessDeniedException'
        '481':
          description: ValidationException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationException'
        '482':
          description: ResourceNotFoundException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResourceNotFoundException'
        '483':
          description: RequestThrottledException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RequestThrottledException'
        '484':
          description: ServiceQuotaExceededException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServiceQuotaExceededException'
        '485':
          description: InternalServerException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalServerException'
      parameters:
        - name: snapshotId
          in: path
          required: true
          description: The ID of the snapshot.
          schema:
            type: string
            pattern: '^snap-[0-9a-f]+$'
            minLength: 1
            maxLength: 64
        - name: blockIndex
          in: path
          required: true
          description: 'The block index of the block in which to write the data. A block index is a logical index in units of <code>512</code> KiB blocks. To identify the block index, divide the logical offset of the data in the logical volume by the block size (logical offset of data/<code>524288</code>). The logical offset of the data must be <code>512</code> KiB aligned.'
          schema:
            type: integer
            minimum: 0
        - name: x-amz-Data-Length
          in: header
          required: true
          description: '<p>The size of the data to write to the block, in bytes. Currently, the only supported size is <code>524288</code> bytes.</p> <p>Valid values: <code>524288</code> </p>'
          schema:
            type: integer
        - name: x-amz-Progress
          in: header
          required: false
          description: 'The progress of the write process, as a percentage.'
          schema:
            type: integer
            minimum: 0
            maximum: 100
        - name: x-amz-Checksum
          in: header
          required: true
          description: A Base64-encoded SHA256 checksum of the data. Only SHA256 checksums are supported.
          schema:
            type: string
            pattern: '^[A-Za-z0-9+/=]+$'
            maxLength: 64
        - name: x-amz-Checksum-Algorithm
          in: header
          required: true
          description: 'The algorithm used to generate the checksum. Currently, the only supported algorithm is <code>SHA256</code>.'
          schema:
            type: string
            enum:
              - SHA256
            pattern: '^[A-Za-z0-9]+$'
            maxLength: 32
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - BlockData
              properties:
                BlockData:
                  description: '<p>The data to write to the block.</p> <p>The block data is not signed as part of the Signature Version 4 signing process. As a result, you must generate and provide a Base64-encoded SHA256 checksum for the block data using the <b>x-amz-Checksum</b> header. Also, you must specify the checksum algorithm using the <b>x-amz-Checksum-Algorithm</b> header. The checksum that you provide is part of the Signature Version 4 signing process. It is validated against a checksum generated by Amazon EBS to ensure the validity and authenticity of the data. If the checksums do not correspond, the request fails. For more information, see <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-accessing-snapshot.html#ebsapis-using-checksums"> Using checksums with the EBS direct APIs</a> in the <i>Amazon Elastic Compute Cloud User Guide</i>.</p>'
                  type: string
                  format: password
    parameters:
      - $ref: '#/components/parameters/X-Amz-Content-Sha256'
      - $ref: '#/components/parameters/X-Amz-Date'
      - $ref: '#/components/parameters/X-Amz-Algorithm'
      - $ref: '#/components/parameters/X-Amz-Credential'
      - $ref: '#/components/parameters/X-Amz-Security-Token'
      - $ref: '#/components/parameters/X-Amz-Signature'
      - $ref: '#/components/parameters/X-Amz-SignedHeaders'
  /snapshots:
    post:
      operationId: StartSnapshot
      description: '<p>Creates a new Amazon EBS snapshot. The new snapshot enters the <code>pending</code> state after the request completes. </p> <p>After creating the snapshot, use <a href="https://docs.aws.amazon.com/ebs/latest/APIReference/API_PutSnapshotBlock.html"> PutSnapshotBlock</a> to write blocks of data to the snapshot.</p>'
      responses:
        '201':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StartSnapshotResponse'
        '480':
          description: AccessDeniedException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AccessDeniedException'
        '481':
          description: ValidationException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationException'
        '482':
          description: RequestThrottledException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RequestThrottledException'
        '483':
          description: ResourceNotFoundException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ResourceNotFoundException'
        '484':
          description: ServiceQuotaExceededException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServiceQuotaExceededException'
        '485':
          description: InternalServerException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InternalServerException'
        '486':
          description: ConcurrentLimitExceededException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConcurrentLimitExceededException'
        '487':
          description: ConflictException
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConflictException'
      parameters: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - VolumeSize
              properties:
                VolumeSize:
                  description: 'The size of the volume, in GiB. The maximum size is <code>16384</code> GiB (16 TiB).'
                  type: integer
                  minimum: 1
                ParentSnapshotId:
                  description: '<p>The ID of the parent snapshot. If there is no parent snapshot, or if you are creating the first snapshot for an on-premises volume, omit this parameter.</p> <p>If your account is enabled for encryption by default, you cannot use an unencrypted snapshot as a parent snapshot. You must first create an encrypted copy of the parent snapshot using <a href="https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_CopySnapshot.html">CopySnapshot</a>.</p>'
                  type: string
                  pattern: '^snap-[0-9a-f]+$'
                  minLength: 1
                  maxLength: 64
                Tags:
                  description: The tags to apply to the snapshot.
                  type: array
                  items:
                    $ref: '#/components/schemas/Tag'
                Description:
                  description: A description for the snapshot.
                  type: string
                  pattern: '^[\S\s]+$'
                  maxLength: 255
                ClientToken:
                  description: '<p>A unique, case-sensitive identifier that you provide to ensure the idempotency of the request. Idempotency ensures that an API request completes only once. With an idempotent request, if the original request completes successfully. The subsequent retries with the same client token return the result from the original successful request and they have no additional effect.</p> <p>If you do not specify a client token, one is automatically generated by the Amazon Web Services SDK.</p> <p>For more information, see <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-direct-api-idempotency.html"> Idempotency for StartSnapshot API</a> in the <i>Amazon Elastic Compute Cloud User Guide</i>.</p>'
                  type: string
                  pattern: '^[\S]+$'
                  maxLength: 255
                Encrypted:
                  description: '<p>Indicates whether to encrypt the snapshot. To create an encrypted snapshot, specify <code>true</code>. To create an unencrypted snapshot, omit this parameter.</p> <p>If you specify a value for <b>ParentSnapshotId</b>, omit this parameter.</p> <p>If you specify <code>true</code>, the snapshot is encrypted using the KMS key specified using the <b>KmsKeyArn</b> parameter. If no value is specified for <b>KmsKeyArn</b>, the default KMS key for your account is used. If no default KMS key has been specified for your account, the Amazon Web Services managed KMS key is used. To set a default KMS key for your account, use <a href="https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_ModifyEbsDefaultKmsKeyId.html"> ModifyEbsDefaultKmsKeyId</a>.</p> <p>If your account is enabled for encryption by default, you cannot set this parameter to <code>false</code>. In this case, you can omit this parameter.</p> <p>For more information, see <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-accessing-snapshot.html#ebsapis-using-encryption"> Using encryption</a> in the <i>Amazon Elastic Compute Cloud User Guide</i>.</p>'
                  type: boolean
                KmsKeyArn:
                  description: '<p>The Amazon Resource Name (ARN) of the Key Management Service (KMS) key to be used to encrypt the snapshot. If you do not specify a KMS key, the default Amazon Web Services managed KMS key is used.</p> <p>If you specify a <b>ParentSnapshotId</b>, omit this parameter; the snapshot will be encrypted using the same KMS key that was used to encrypt the parent snapshot.</p> <p>If <b>Encrypted</b> is set to <code>true</code>, you must specify a KMS key ARN. </p>'
                  type: string
                  pattern: 'arn:aws[a-z\-]*:kms:.*:[0-9]{12}:key/.*'
                  minLength: 1
                  maxLength: 2048
                  format: password
                Timeout:
                  description: '<p>The amount of time (in minutes) after which the snapshot is automatically cancelled if:</p> <ul> <li> <p>No blocks are written to the snapshot.</p> </li> <li> <p>The snapshot is not completed after writing the last block of data.</p> </li> </ul> <p>If no value is specified, the timeout defaults to <code>60</code> minutes.</p>'
                  type: integer
                  minimum: 10
                  maximum: 60
    parameters:
      - $ref: '#/components/parameters/X-Amz-Content-Sha256'
      - $ref: '#/components/parameters/X-Amz-Date'
      - $ref: '#/components/parameters/X-Amz-Algorithm'
      - $ref: '#/components/parameters/X-Amz-Credential'
      - $ref: '#/components/parameters/X-Amz-Security-Token'
      - $ref: '#/components/parameters/X-Amz-Signature'
      - $ref: '#/components/parameters/X-Amz-SignedHeaders'
components:
  parameters:
    X-Amz-Content-Sha256:
      name: X-Amz-Content-Sha256
      in: header
      schema:
        type: string
      required: false
    X-Amz-Date:
      name: X-Amz-Date
      in: header
      schema:
        type: string
      required: false
    X-Amz-Algorithm:
      name: X-Amz-Algorithm
      in: header
      schema:
        type: string
      required: false
    X-Amz-Credential:
      name: X-Amz-Credential
      in: header
      schema:
        type: string
      required: false
    X-Amz-Security-Token:
      name: X-Amz-Security-Token
      in: header
      schema:
        type: string
      required: false
    X-Amz-Signature:
      name: X-Amz-Signature
      in: header
      schema:
        type: string
      required: false
    X-Amz-SignedHeaders:
      name: X-Amz-SignedHeaders
      in: header
      schema:
        type: string
      required: false
  securitySchemes:
    hmac:
      type: apiKey
      name: Authorization
      in: header
      description: Amazon Signature authorization v4
      x-amazon-apigateway-authtype: awsSigv4
  schemas:
    CompleteSnapshotResponse:
      type: object
      properties:
        Status:
          $ref: '#/components/schemas/Status'
          description: The status of the snapshot.
    AccessDeniedException: {}
    ValidationException: {}
    ResourceNotFoundException: {}
    RequestThrottledException: {}
    ServiceQuotaExceededException: {}
    InternalServerException: {}
    GetSnapshotBlockResponse:
      type: object
      properties:
        BlockData:
          $ref: '#/components/schemas/BlockData'
          description: The data content of the block.
    ListChangedBlocksResponse:
      type: object
      properties:
        ChangedBlocks:
          $ref: '#/components/schemas/ChangedBlocks'
          description: An array of objects containing information about the changed blocks.
        ExpiryTime:
          $ref: '#/components/schemas/TimeStamp'
          description: The time when the <code>BlockToken</code> expires.
        VolumeSize:
          $ref: '#/components/schemas/VolumeSize'
          description: The size of the volume in GB.
        BlockSize:
          $ref: '#/components/schemas/BlockSize'
          description: 'The size of the blocks in the snapshot, in bytes.'
        NextToken:
          $ref: '#/components/schemas/PageToken'
          description: The token to use to retrieve the next page of results. This value is null when there are no more results to return.
    ListSnapshotBlocksResponse:
      type: object
      properties:
        Blocks:
          $ref: '#/components/schemas/Blocks'
          description: An array of objects containing information about the blocks.
        ExpiryTime:
          $ref: '#/components/schemas/TimeStamp'
          description: The time when the <code>BlockToken</code> expires.
        VolumeSize:
          $ref: '#/components/schemas/VolumeSize'
          description: The size of the volume in GB.
        BlockSize:
          $ref: '#/components/schemas/BlockSize'
          description: 'The size of the blocks in the snapshot, in bytes.'
        NextToken:
          $ref: '#/components/schemas/PageToken'
          description: The token to use to retrieve the next page of results. This value is null when there are no more results to return.
    PutSnapshotBlockResponse:
      type: object
      properties: {}
    StartSnapshotResponse:
      type: object
      properties:
        Description:
          $ref: '#/components/schemas/Description'
          description: The description of the snapshot.
        SnapshotId:
          $ref: '#/components/schemas/SnapshotId'
          description: The ID of the snapshot.
        OwnerId:
          $ref: '#/components/schemas/OwnerId'
          description: The Amazon Web Services account ID of the snapshot owner.
        Status:
          $ref: '#/components/schemas/Status'
          description: The status of the snapshot.
        StartTime:
          $ref: '#/components/schemas/TimeStamp'
          description: The timestamp when the snapshot was created.
        VolumeSize:
          $ref: '#/components/schemas/VolumeSize'
          description: 'The size of the volume, in GiB.'
        BlockSize:
          $ref: '#/components/schemas/BlockSize'
          description: 'The size of the blocks in the snapshot, in bytes.'
        Tags:
          $ref: '#/components/schemas/Tags'
          description: 'The tags applied to the snapshot. You can specify up to 50 tags per snapshot. For more information, see <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/Using_Tags.html"> Tagging your Amazon EC2 resources</a> in the <i>Amazon Elastic Compute Cloud User Guide</i>.'
        ParentSnapshotId:
          $ref: '#/components/schemas/SnapshotId'
          description: The ID of the parent snapshot.
        KmsKeyArn:
          $ref: '#/components/schemas/KmsKeyArn'
          description: The Amazon Resource Name (ARN) of the Key Management Service (KMS) key used to encrypt the snapshot.
    Tag:
      type: object
      properties:
        Key:
          $ref: '#/components/schemas/TagKey'
          description: The key of the tag.
        Value:
          $ref: '#/components/schemas/TagValue'
          description: The value of the tag.
      description: Describes a tag.
    ConcurrentLimitExceededException: {}
    ConflictException: {}
    BlockIndex:
      type: integer
      minimum: 0
    BlockToken:
      type: string
      pattern: '^[A-Za-z0-9+/=]+$'
      maxLength: 256
    Block:
      type: object
      properties:
        BlockIndex:
          $ref: '#/components/schemas/BlockIndex'
          description: The block index.
        BlockToken:
          $ref: '#/components/schemas/BlockToken'
          description: The block token for the block index.
      description: A block of data in an Amazon Elastic Block Store snapshot.
    BlockData:
      type: string
      format: password
    BlockSize:
      type: integer
    Blocks:
      type: array
      items:
        $ref: '#/components/schemas/Block'
    Boolean:
      type: boolean
    ChangedBlock:
      type: object
      properties:
        BlockIndex:
          $ref: '#/components/schemas/BlockIndex'
          description: The block index.
        FirstBlockToken:
          $ref: '#/components/schemas/BlockToken'
          description: The block token for the block index of the <code>FirstSnapshotId</code> specified in the <code>ListChangedBlocks</code> operation. This value is absent if the first snapshot does not have the changed block that is on the second snapshot.
        SecondBlockToken:
          $ref: '#/components/schemas/BlockToken'
          description: The block token for the block index of the <code>SecondSnapshotId</code> specified in the <code>ListChangedBlocks</code> operation.
      description: A block of data in an Amazon Elastic Block Store snapshot that is different from another snapshot of the same volume/snapshot lineage.
    ChangedBlocks:
      type: array
      items:
        $ref: '#/components/schemas/ChangedBlock'
    ChangedBlocksCount:
      type: integer
      minimum: 0
    Checksum:
      type: string
      pattern: '^[A-Za-z0-9+/=]+$'
      maxLength: 64
    ChecksumAggregationMethod:
      type: string
      enum:
        - LINEAR
      pattern: '^[A-Za-z0-9]+$'
      maxLength: 32
    ChecksumAlgorithm:
      type: string
      enum:
        - SHA256
      pattern: '^[A-Za-z0-9]+$'
      maxLength: 32
    SnapshotId:
      type: string
      pattern: '^snap-[0-9a-f]+$'
      minLength: 1
      maxLength: 64
    CompleteSnapshotRequest:
      type: object
      title: CompleteSnapshotRequest
      properties: {}
    Status:
      type: string
      enum:
        - completed
        - pending
        - error
      maxLength: 32
    DataLength:
      type: integer
    Description:
      type: string
      pattern: '^[\S\s]+$'
      maxLength: 255
    GetSnapshotBlockRequest:
      type: object
      title: GetSnapshotBlockRequest
      properties: {}
    IdempotencyToken:
      type: string
      pattern: '^[\S]+$'
      maxLength: 255
    KmsKeyArn:
      type: string
      pattern: 'arn:aws[a-z\-]*:kms:.*:[0-9]{12}:key/.*'
      minLength: 1
      maxLength: 2048
      format: password
    PageToken:
      type: string
      pattern: '^[A-Za-z0-9+/=]+$'
      maxLength: 256
    MaxResults:
      type: integer
      minimum: 100
      maximum: 10000
    ListChangedBlocksRequest:
      type: object
      title: ListChangedBlocksRequest
      properties: {}
    TimeStamp:
      type: string
      format: date-time
    VolumeSize:
      type: integer
      minimum: 1
    ListSnapshotBlocksRequest:
      type: object
      title: ListSnapshotBlocksRequest
      properties: {}
    OwnerId:
      type: string
      pattern: \S+
      minLength: 1
      maxLength: 24
    Progress:
      type: integer
      minimum: 0
      maximum: 100
    PutSnapshotBlockRequest:
      type: object
      required:
        - BlockData
      title: PutSnapshotBlockRequest
      properties:
        BlockData:
          $ref: '#/components/schemas/BlockData'
          description: '<p>The data to write to the block.</p> <p>The block data is not signed as part of the Signature Version 4 signing process. As a result, you must generate and provide a Base64-encoded SHA256 checksum for the block data using the <b>x-amz-Checksum</b> header. Also, you must specify the checksum algorithm using the <b>x-amz-Checksum-Algorithm</b> header. The checksum that you provide is part of the Signature Version 4 signing process. It is validated against a checksum generated by Amazon EBS to ensure the validity and authenticity of the data. If the checksums do not correspond, the request fails. For more information, see <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-accessing-snapshot.html#ebsapis-using-checksums"> Using checksums with the EBS direct APIs</a> in the <i>Amazon Elastic Compute Cloud User Guide</i>.</p>'
    Tags:
      type: array
      items:
        $ref: '#/components/schemas/Tag'
    Timeout:
      type: integer
      minimum: 10
      maximum: 60
    StartSnapshotRequest:
      type: object
      required:
        - VolumeSize
      title: StartSnapshotRequest
      properties:
        VolumeSize:
          $ref: '#/components/schemas/VolumeSize'
          description: 'The size of the volume, in GiB. The maximum size is <code>16384</code> GiB (16 TiB).'
        ParentSnapshotId:
          $ref: '#/components/schemas/SnapshotId'
          description: '<p>The ID of the parent snapshot. If there is no parent snapshot, or if you are creating the first snapshot for an on-premises volume, omit this parameter.</p> <p>If your account is enabled for encryption by default, you cannot use an unencrypted snapshot as a parent snapshot. You must first create an encrypted copy of the parent snapshot using <a href="https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_CopySnapshot.html">CopySnapshot</a>.</p>'
        Tags:
          $ref: '#/components/schemas/Tags'
          description: The tags to apply to the snapshot.
        Description:
          $ref: '#/components/schemas/Description'
          description: A description for the snapshot.
        ClientToken:
          $ref: '#/components/schemas/IdempotencyToken'
          description: '<p>A unique, case-sensitive identifier that you provide to ensure the idempotency of the request. Idempotency ensures that an API request completes only once. With an idempotent request, if the original request completes successfully. The subsequent retries with the same client token return the result from the original successful request and they have no additional effect.</p> <p>If you do not specify a client token, one is automatically generated by the Amazon Web Services SDK.</p> <p>For more information, see <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-direct-api-idempotency.html"> Idempotency for StartSnapshot API</a> in the <i>Amazon Elastic Compute Cloud User Guide</i>.</p>'
        Encrypted:
          $ref: '#/components/schemas/Boolean'
          description: '<p>Indicates whether to encrypt the snapshot. To create an encrypted snapshot, specify <code>true</code>. To create an unencrypted snapshot, omit this parameter.</p> <p>If you specify a value for <b>ParentSnapshotId</b>, omit this parameter.</p> <p>If you specify <code>true</code>, the snapshot is encrypted using the KMS key specified using the <b>KmsKeyArn</b> parameter. If no value is specified for <b>KmsKeyArn</b>, the default KMS key for your account is used. If no default KMS key has been specified for your account, the Amazon Web Services managed KMS key is used. To set a default KMS key for your account, use <a href="https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_ModifyEbsDefaultKmsKeyId.html"> ModifyEbsDefaultKmsKeyId</a>.</p> <p>If your account is enabled for encryption by default, you cannot set this parameter to <code>false</code>. In this case, you can omit this parameter.</p> <p>For more information, see <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-accessing-snapshot.html#ebsapis-using-encryption"> Using encryption</a> in the <i>Amazon Elastic Compute Cloud User Guide</i>.</p>'
        KmsKeyArn:
          $ref: '#/components/schemas/KmsKeyArn'
          description: '<p>The Amazon Resource Name (ARN) of the Key Management Service (KMS) key to be used to encrypt the snapshot. If you do not specify a KMS key, the default Amazon Web Services managed KMS key is used.</p> <p>If you specify a <b>ParentSnapshotId</b>, omit this parameter; the snapshot will be encrypted using the same KMS key that was used to encrypt the parent snapshot.</p> <p>If <b>Encrypted</b> is set to <code>true</code>, you must specify a KMS key ARN. </p>'
        Timeout:
          $ref: '#/components/schemas/Timeout'
          description: '<p>The amount of time (in minutes) after which the snapshot is automatically cancelled if:</p> <ul> <li> <p>No blocks are written to the snapshot.</p> </li> <li> <p>The snapshot is not completed after writing the last block of data.</p> </li> </ul> <p>If no value is specified, the timeout defaults to <code>60</code> minutes.</p>'
    TagKey:
      type: string
      pattern: '^[\S\s]+$'
      maxLength: 127
    TagValue:
      type: string
      pattern: '^[\S\s]+$'
      maxLength: 255
security:
  - hmac: []
