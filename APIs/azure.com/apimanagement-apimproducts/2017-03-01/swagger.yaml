swagger: '2.0'
schemes:
  - https
host: azure.local
info:
  description: 'Use these REST APIs for performing operations on Product entity associated with your Azure API Management deployment. The Product entity represents a product in API Management. Products include one or more APIs and their associated terms of use. Once a product is published, developers can subscribe to the product and begin to use the productâ€™s APIs.'
  title: ApiManagementClient
  version: '2017-03-01'
  x-apisguru-categories:
    - cloud
  x-logo:
    url: 'https://assets.onestore.ms/cdnfiles/onestorerolling-1606-01000/shell/v3/images/logo/microsoft.png'
  x-origin:
    - format: swagger
      url: 'https://raw.githubusercontent.com/Azure/azure-rest-api-specs/master/specification/apimanagement/control-plane/Microsoft.ApiManagement/preview/2017-03-01/apimproducts.json'
      version: '2.0'
  x-preferred: false
  x-providerName: azure.com
  x-serviceName: apimanagement-apimproducts
  x-tags:
    - Azure
    - Microsoft
consumes:
  - application/json
produces:
  - application/json
securityDefinitions:
  apim_key:
    in: header
    name: Authorization
    type: apiKey
security:
  - apim_key: []
parameters:
  ProductIdParameter:
    description: Product identifier. Must be unique in the current API Management service instance.
    in: path
    maxLength: 256
    minLength: 1
    name: productId
    pattern: '^[^*#&+:<>?]+$'
    required: true
    type: string
    x-ms-parameter-location: method
paths:
  /products:
    get:
      description: Lists a collection of products in the specified service instance.
      operationId: Product_List
      parameters:
        - description: |-
            | Field       | Supported operators    | Supported functions                         |
            |-------------|------------------------|---------------------------------------------|
            | id          | ge, le, eq, ne, gt, lt | substringof, contains, startswith, endswith |
            | name        | ge, le, eq, ne, gt, lt | substringof, contains, startswith, endswith |
            | description | ge, le, eq, ne, gt, lt | substringof, contains, startswith, endswith |
            | terms       | ge, le, eq, ne, gt, lt | substringof, contains, startswith, endswith |
            | state       | eq                     |                                             |
          in: query
          name: $filter
          required: false
          type: string
        - description: Number of records to return.
          format: int32
          in: query
          minimum: 1
          name: $top
          required: false
          type: integer
          x-ms-parameter-location: method
        - description: Number of records to skip.
          format: int32
          in: query
          minimum: 0
          name: $skip
          required: false
          type: integer
          x-ms-parameter-location: method
        - description: 'When set to true, the response contains an array of groups that have visibility to the product. The default is false.'
          in: query
          name: expandGroups
          required: false
          type: boolean
        - description: Version of the API to be used with the client request.
          in: query
          name: api-version
          required: true
          type: string
      responses:
        '200':
          description: A Collection of the Product entities for the specified API Management service instance.
          schema:
            $ref: '#/definitions/ProductCollection'
        default:
          description: Error response describing why the operation failed.
          schema:
            description: Error Body contract.
            properties:
              code:
                description: Service-defined error code. This code serves as a sub-status for the HTTP error code specified in the response.
                type: string
              details:
                description: 'The list of invalid fields send in request, in case of validation error.'
                items:
                  $ref: '#/definitions/ErrorFieldContract'
                type: array
              message:
                description: Human-readable representation of the error.
                type: string
      tags:
        - Products
      x-ms-examples:
        ApiManagementListProducts:
          parameters:
            $skip: 0
            $top: 10000
            Accept: application/json
            api-version: '2017-03-01'
            apimBaseUrl: apimservice1.management.azure-api.net
            expandGroups: false
          responses:
            '200':
              body:
                count: 2
                value:
                  - approvalRequired: true
                    description: product_description_5a58badca40f7ef2e05bcd26
                    id: /products/5a58badca40f7ef2e05bcd24
                    name: product_5a58badca40f7ef2e05bcd25
                    state: published
                    subscriptionRequired: true
                    subscriptionsLimit: 1
                  - approvalRequired: false
                    description: product_description_5a58bae0a40f7ef2e05bcd3f
                    id: /products/5a58bae0a40f7ef2e05bcd3d
                    name: product_5a58bae0a40f7ef2e05bcd3e
                    state: published
                    subscriptionRequired: true
                    subscriptionsLimit: 1
      x-ms-odata: '#/definitions/ProductContract'
      x-ms-pageable:
        nextLinkName: nextLink
  '/products/{productId}':
    delete:
      description: Delete product.
      operationId: Product_Delete
      parameters:
        - $ref: '#/parameters/ProductIdParameter'
        - description: Delete existing subscriptions to the product or not.
          in: query
          name: deleteSubscriptions
          required: false
          type: boolean
        - description: ETag of the Product Entity. ETag should match the current entity state from the header response of the GET request or it should be * for unconditional update.
          in: header
          name: If-Match
          required: true
          type: string
        - description: Version of the API to be used with the client request.
          in: query
          name: api-version
          required: true
          type: string
      responses:
        '204':
          description: The product was successfully deleted.
        default:
          description: Error response describing why the operation failed.
          schema:
            description: Error Body contract.
            properties:
              code:
                description: Service-defined error code. This code serves as a sub-status for the HTTP error code specified in the response.
                type: string
              details:
                description: 'The list of invalid fields send in request, in case of validation error.'
                items:
                  $ref: '#/definitions/ErrorFieldContract'
                type: array
              message:
                description: Human-readable representation of the error.
                type: string
      tags:
        - Products
      x-ms-examples:
        ApiManagementDeleteProducts:
          parameters:
            If-Match: '"AAAAAAAADJg="'
            api-version: '2017-03-01'
            apimBaseUrl: apimservice1.management.azure-api.net
            deleteSubscriptions: true
            productId: 5a58bb0ea40f7ef2e05bd40e
          responses:
            '204': {}
    get:
      description: Gets the details of the product specified by its identifier.
      operationId: Product_Get
      parameters:
        - $ref: '#/parameters/ProductIdParameter'
        - description: Version of the API to be used with the client request.
          in: query
          name: api-version
          required: true
          type: string
      responses:
        '200':
          description: The response body contains the specified Product entity.
          headers:
            ETag:
              description: Current entity state version. Should be treated as opaque and used to make conditional HTTP requests.
              type: string
          schema:
            $ref: '#/definitions/ProductContract'
        default:
          description: Error response describing why the operation failed.
          schema:
            description: Error Body contract.
            properties:
              code:
                description: Service-defined error code. This code serves as a sub-status for the HTTP error code specified in the response.
                type: string
              details:
                description: 'The list of invalid fields send in request, in case of validation error.'
                items:
                  $ref: '#/definitions/ErrorFieldContract'
                type: array
              message:
                description: Human-readable representation of the error.
                type: string
      tags:
        - Products
      x-ms-examples:
        ApiManagementGetProducts:
          parameters:
            Accept: application/json
            api-version: '2017-03-01'
            apimBaseUrl: apimservice1.management.azure-api.net
            productId: 5a58bac9a40f7ef2e05bcc98
          responses:
            '200':
              body:
                approvalRequired: false
                description: product_description_5a58bac9a40f7ef2e05bcc9a
                id: /products/5a58bac9a40f7ef2e05bcc98
                name: product_5a58bac9a40f7ef2e05bcc99
                state: notPublished
                subscriptionRequired: true
    patch:
      description: Update product.
      operationId: Product_Update
      parameters:
        - $ref: '#/parameters/ProductIdParameter'
        - description: Update parameters.
          in: body
          name: parameters
          required: true
          schema:
            $ref: '#/definitions/ProductUpdateParameters'
        - description: ETag of the Product Entity. ETag should match the current entity state from the header response of the GET request or it should be * for unconditional update.
          in: header
          name: If-Match
          required: true
          type: string
        - description: Version of the API to be used with the client request.
          in: query
          name: api-version
          required: true
          type: string
      responses:
        '204':
          description: No Content in case of Update Successfull.
        default:
          description: Error response describing why the operation failed.
          schema:
            description: Error Body contract.
            properties:
              code:
                description: Service-defined error code. This code serves as a sub-status for the HTTP error code specified in the response.
                type: string
              details:
                description: 'The list of invalid fields send in request, in case of validation error.'
                items:
                  $ref: '#/definitions/ErrorFieldContract'
                type: array
              message:
                description: Human-readable representation of the error.
                type: string
      tags:
        - Products
      x-ms-examples:
        ApiManagementPatchProducts:
          parameters:
            If-Match: '"AAAAAAAACdk="'
            api-version: '2017-03-01'
            apimBaseUrl: apimservice1.management.azure-api.net
            parameters:
              state: notPublished
              subscriptionsLimit: 1
            productId: 5a58badca40f7ef2e05bcd24
          responses:
            '204': {}
    put:
      description: Creates or Updates a product.
      operationId: Product_CreateOrUpdate
      parameters:
        - $ref: '#/parameters/ProductIdParameter'
        - description: Create or update parameters.
          in: body
          name: parameters
          required: true
          schema:
            $ref: '#/definitions/ProductContract'
        - description: Version of the API to be used with the client request.
          in: query
          name: api-version
          required: true
          type: string
      responses:
        '200':
          description: Product was successfully updated.
          schema:
            $ref: '#/definitions/ProductContract'
        '201':
          description: Product was successfully created.
          schema:
            $ref: '#/definitions/ProductContract'
        default:
          description: Error response describing why the operation failed.
          schema:
            description: Error Body contract.
            properties:
              code:
                description: Service-defined error code. This code serves as a sub-status for the HTTP error code specified in the response.
                type: string
              details:
                description: 'The list of invalid fields send in request, in case of validation error.'
                items:
                  $ref: '#/definitions/ErrorFieldContract'
                type: array
              message:
                description: Human-readable representation of the error.
                type: string
      tags:
        - Products
      x-ms-examples:
        ApiManagementPutProducts:
          parameters:
            api-version: '2017-03-01'
            apimBaseUrl: apimservice1.management.azure-api.net
            parameters:
              approvalRequired: false
              description: product_description_5a58bab1a40f7ef2e05bc761
              name: product_5a58bab1a40f7ef2e05bc760
              state: notPublished
            productId: 5a58bab1a40f7ef2e05bc75f
          responses:
            '200':
              body:
                approvalRequired: false
                description: product_description_5a58bab1a40f7ef2e05bc761
                id: /products/5a58bab1a40f7ef2e05bc75f
                name: product_5a58bab1a40f7ef2e05bc760
                state: notPublished
                subscriptionRequired: true
            '201':
              body:
                approvalRequired: false
                description: product_description_5a58bab1a40f7ef2e05bc761
                id: /products/5a58bab1a40f7ef2e05bc75f
                name: product_5a58bab1a40f7ef2e05bc760
                state: notPublished
                subscriptionRequired: true
  '/products/{productId}/apis':
    get:
      description: Lists a collection of the APIs associated with a product.
      operationId: ProductApi_ListByProduct
      parameters:
        - $ref: '#/parameters/ProductIdParameter'
        - description: |
            | Field       | Supported operators    | Supported functions                         |
            |-------------|------------------------|---------------------------------------------|
            | id          | ge, le, eq, ne, gt, lt | substringof, contains, startswith, endswith |
            | name        | ge, le, eq, ne, gt, lt | substringof, contains, startswith, endswith |
            | description | ge, le, eq, ne, gt, lt | substringof, contains, startswith, endswith |
            | serviceUrl  | ge, le, eq, ne, gt, lt | substringof, contains, startswith, endswith |
            | path        | ge, le, eq, ne, gt, lt | substringof, contains, startswith, endswith |
          in: query
          name: $filter
          required: false
          type: string
        - description: Number of records to return.
          format: int32
          in: query
          minimum: 1
          name: $top
          required: false
          type: integer
          x-ms-parameter-location: method
        - description: Number of records to skip.
          format: int32
          in: query
          minimum: 0
          name: $skip
          required: false
          type: integer
          x-ms-parameter-location: method
        - description: Version of the API to be used with the client request.
          in: query
          name: api-version
          required: true
          type: string
      responses:
        '200':
          description: The response body contains a collection of Api entities in the product.
          schema:
            description: Paged Api list representation.
            properties:
              count:
                description: Total number of entities
                type: integer
              nextLink:
                description: Next page link if any.
                type: string
              value:
                items:
                  $ref: '#/definitions/ApiContract'
                type: array
        default:
          description: Error response describing why the operation failed.
          schema:
            description: Error Body contract.
            properties:
              code:
                description: Service-defined error code. This code serves as a sub-status for the HTTP error code specified in the response.
                type: string
              details:
                description: 'The list of invalid fields send in request, in case of validation error.'
                items:
                  $ref: '#/definitions/ErrorFieldContract'
                type: array
              message:
                description: Human-readable representation of the error.
                type: string
      tags:
        - ProductApis
      x-ms-examples:
        ApiManagementListProductsApis:
          parameters:
            Accept: application/json
            api-version: '2017-03-01'
            apimBaseUrl: apimservice1.management.azure-api.net
            productId: 5a58bdf3a40f7e104892acb8
          responses:
            '200':
              body:
                count: 1
                value:
                  - apiRevision: '1'
                    description: description_5a58bdf3a40f7e104892acc0
                    id: /apis/5a58bdf3a40f7e104892acbe
                    isCurrent: true
                    name: api_5a58bdf3a40f7e104892acbf
                    path: suffix_5a58bdf3a40f7e104892acc2
                    protocols:
                      - https
                    serviceUrl: 'http://contoso/5a58bdf3a40f7e104892acc1'
      x-ms-odata: './apimapis.json#/definitions/ApiContract'
      x-ms-pageable:
        nextLinkName: nextLink
  '/products/{productId}/apis/{apiId}':
    delete:
      description: Deletes the specified API from the specified product.
      operationId: ProductApi_Delete
      parameters:
        - $ref: '#/parameters/ProductIdParameter'
        - description: API identifier. Must be unique in the current API Management service instance.
          in: path
          maxLength: 256
          minLength: 1
          name: apiId
          pattern: '^[^*#&+:<>?]+$'
          required: true
          type: string
          x-ms-parameter-location: method
        - description: Version of the API to be used with the client request.
          in: query
          name: api-version
          required: true
          type: string
      responses:
        '204':
          description: The API was successfully removed from the product.
        default:
          description: Error response describing why the operation failed.
          schema:
            description: Error Body contract.
            properties:
              code:
                description: Service-defined error code. This code serves as a sub-status for the HTTP error code specified in the response.
                type: string
              details:
                description: 'The list of invalid fields send in request, in case of validation error.'
                items:
                  $ref: '#/definitions/ErrorFieldContract'
                type: array
              message:
                description: Human-readable representation of the error.
                type: string
      tags:
        - ProductApis
      x-ms-examples:
        ApiManagementDeleteProductsApis:
          parameters:
            api-version: '2017-03-01'
            apiId: 5a58bd5aa40f7e104892a541
            apimBaseUrl: apimservice1.management.azure-api.net
            productId: 5a58bd5aa40f7e104892a53c
          responses:
            '204': {}
    put:
      description: Adds an API to the specified product.
      operationId: ProductApi_CreateOrUpdate
      parameters:
        - $ref: '#/parameters/ProductIdParameter'
        - description: API identifier. Must be unique in the current API Management service instance.
          in: path
          maxLength: 256
          minLength: 1
          name: apiId
          pattern: '^[^*#&+:<>?]+$'
          required: true
          type: string
          x-ms-parameter-location: method
        - description: Version of the API to be used with the client request.
          in: query
          name: api-version
          required: true
          type: string
      responses:
        '200':
          description: The specified API is already added to the product.
          schema:
            allOf:
              - $ref: '#/definitions/ApiContractProperties'
            description: Api Contract Details
            properties:
              id:
                description: Identifier of the Entity
                type: string
        '201':
          description: The API was successfully added to the product.
          schema:
            allOf:
              - $ref: '#/definitions/ApiContractProperties'
            description: Api Contract Details
            properties:
              id:
                description: Identifier of the Entity
                type: string
        default:
          description: Error response describing why the operation failed.
          schema:
            description: Error Body contract.
            properties:
              code:
                description: Service-defined error code. This code serves as a sub-status for the HTTP error code specified in the response.
                type: string
              details:
                description: 'The list of invalid fields send in request, in case of validation error.'
                items:
                  $ref: '#/definitions/ErrorFieldContract'
                type: array
              message:
                description: Human-readable representation of the error.
                type: string
      tags:
        - ProductApis
      x-ms-examples:
        ApiManagementPutProductsApis:
          parameters:
            api-version: '2017-03-01'
            apiId: 5a58bac7a40f7ef2e05bcb05
            apimBaseUrl: apimservice1.management.azure-api.net
            productId: 5a58bac7a40f7ef2e05bcafb
          responses:
            '200':
              body:
                apiRevision: '1'
                description: description_5a58bac7a40f7ef2e05bcb07
                id: /apis/5a58bac7a40f7ef2e05bcb05
                isCurrent: true
                name: api_5a58bac7a40f7ef2e05bcb06
                path: suffix_5a58bac7a40f7ef2e05bcb09
                serviceUrl: 'http://contoso/5a58bac7a40f7ef2e05bcb08'
            '201':
              body:
                apiRevision: '1'
                description: description_5a58bac7a40f7ef2e05bcb07
                id: /apis/5a58bac7a40f7ef2e05bcb05
                isCurrent: true
                name: api_5a58bac7a40f7ef2e05bcb06
                path: suffix_5a58bac7a40f7ef2e05bcb09
                serviceUrl: 'http://contoso/5a58bac7a40f7ef2e05bcb08'
  '/products/{productId}/groups':
    get:
      description: Lists the collection of developer groups associated with the specified product.
      operationId: ProductGroup_ListByProduct
      parameters:
        - $ref: '#/parameters/ProductIdParameter'
        - description: |-
            | Field       | Supported operators    | Supported functions                         |
            |-------------|------------------------|---------------------------------------------|
            | id          | ge, le, eq, ne, gt, lt | substringof, contains, startswith, endswith |
            | name        | ge, le, eq, ne, gt, lt | substringof, contains, startswith, endswith |
            | description | ge, le, eq, ne, gt, lt | substringof, contains, startswith, endswith |
            | type        | eq, ne                 | N/A                                         |
          in: query
          name: $filter
          required: false
          type: string
        - description: Number of records to return.
          format: int32
          in: query
          minimum: 1
          name: $top
          required: false
          type: integer
          x-ms-parameter-location: method
        - description: Number of records to skip.
          format: int32
          in: query
          minimum: 0
          name: $skip
          required: false
          type: integer
          x-ms-parameter-location: method
        - description: Version of the API to be used with the client request.
          in: query
          name: api-version
          required: true
          type: string
      responses:
        '200':
          description: Lists a collection of Group entities.
          schema:
            description: Paged Group list representation.
            properties:
              count:
                description: Total number of entities
                type: integer
              nextLink:
                description: Next page link if any.
                type: string
              value:
                description: Page values.
                items:
                  $ref: '#/definitions/GroupContract'
                type: array
        default:
          description: Error response describing why the operation failed.
          schema:
            description: Error Body contract.
            properties:
              code:
                description: Service-defined error code. This code serves as a sub-status for the HTTP error code specified in the response.
                type: string
              details:
                description: 'The list of invalid fields send in request, in case of validation error.'
                items:
                  $ref: '#/definitions/ErrorFieldContract'
                type: array
              message:
                description: Human-readable representation of the error.
                type: string
      tags:
        - ProductGroups
      x-ms-examples:
        ApiManagementListProductsGroups:
          parameters:
            Accept: application/json
            api-version: '2017-03-01'
            apimBaseUrl: apimservice1.management.azure-api.net
            productId: 5a58bafca40f7ef2e05bd22d
          responses:
            '200':
              body:
                count: 2
                value:
                  - builtIn: false
                    id: /groups/5a58bafca40f7ef2e05bd232
                    name: 5a58bafca40f7ef2e05bd233
                    type: custom
                  - builtIn: true
                    description: Administrators is a built-in group. Its membership is managed by the system. Microsoft Azure subscription administrators fall into this group.
                    id: /groups/administrators
                    name: Administrators
                    type: system
      x-ms-odata: './apimgroups.json#/definitions/GroupContract'
      x-ms-pageable:
        nextLinkName: nextLink
  '/products/{productId}/groups/{groupId}':
    delete:
      description: Deletes the association between the specified group and product.
      operationId: ProductGroup_Delete
      parameters:
        - $ref: '#/parameters/ProductIdParameter'
        - description: Group identifier. Must be unique in the current API Management service instance.
          in: path
          maxLength: 256
          minLength: 1
          name: groupId
          pattern: '^[^*#&+:<>?]+$'
          required: true
          type: string
          x-ms-parameter-location: method
        - description: Version of the API to be used with the client request.
          in: query
          name: api-version
          required: true
          type: string
      responses:
        '204':
          description: The group was successfully disassociated with the product.
        default:
          description: Error response describing why the operation failed.
          schema:
            description: Error Body contract.
            properties:
              code:
                description: Service-defined error code. This code serves as a sub-status for the HTTP error code specified in the response.
                type: string
              details:
                description: 'The list of invalid fields send in request, in case of validation error.'
                items:
                  $ref: '#/definitions/ErrorFieldContract'
                type: array
              message:
                description: Human-readable representation of the error.
                type: string
      tags:
        - ProductGroups
      x-ms-examples:
        ApiManagementDeleteProductsGroups:
          parameters:
            api-version: '2017-03-01'
            apimBaseUrl: apimservice1.management.azure-api.net
            groupId: 5a58bbf3a40f7e1048928f6c
            productId: 5a58bbf3a40f7e1048928f67
          responses:
            '204': {}
    put:
      description: Adds the association between the specified developer group with the specified product.
      operationId: ProductGroup_CreateOrUpdate
      parameters:
        - $ref: '#/parameters/ProductIdParameter'
        - description: Group identifier. Must be unique in the current API Management service instance.
          in: path
          maxLength: 256
          minLength: 1
          name: groupId
          pattern: '^[^*#&+:<>?]+$'
          required: true
          type: string
          x-ms-parameter-location: method
        - description: Version of the API to be used with the client request.
          in: query
          name: api-version
          required: true
          type: string
      responses:
        '200':
          description: The specified group is already associated with the product.
          schema:
            allOf:
              - $ref: '#/definitions/GroupContractProperties'
            description: Contract details.
            properties:
              id:
                description: Identifier of the Group entity.
                type: string
        '201':
          description: The group was successfully associated with the product.
          schema:
            allOf:
              - $ref: '#/definitions/GroupContractProperties'
            description: Contract details.
            properties:
              id:
                description: Identifier of the Group entity.
                type: string
        default:
          description: Error response describing why the operation failed.
          schema:
            description: Error Body contract.
            properties:
              code:
                description: Service-defined error code. This code serves as a sub-status for the HTTP error code specified in the response.
                type: string
              details:
                description: 'The list of invalid fields send in request, in case of validation error.'
                items:
                  $ref: '#/definitions/ErrorFieldContract'
                type: array
              message:
                description: Human-readable representation of the error.
                type: string
      tags:
        - ProductGroups
      x-ms-examples:
        ApiManagementPutProductsGroups:
          parameters:
            api-version: '2017-03-01'
            apimBaseUrl: apimservice1.management.azure-api.net
            groupId: 5a58bac8a40f7ef2e05bcc63
            productId: 5a58bac8a40f7ef2e05bcc5e
          responses:
            '200':
              body:
                builtIn: false
                id: /groups/5a58bac8a40f7ef2e05bcc63
                name: 5a58bac8a40f7ef2e05bcc64
                type: custom
            '201':
              body:
                builtIn: false
                id: /groups/5a58bac8a40f7ef2e05bcc63
                name: 5a58bac8a40f7ef2e05bcc64
                type: custom
  '/products/{productId}/policies':
    get:
      description: Get the policy configuration at the Product level.
      operationId: ProductPolicy_ListByProduct
      parameters:
        - description: Version of the API to be used with the client request.
          in: query
          name: api-version
          required: true
          type: string
        - $ref: '#/parameters/ProductIdParameter'
      responses:
        '200':
          description: Product Policy information.
          headers:
            ETag:
              description: Current entity state version. Should be treated as opaque and used to make conditional HTTP requests.
              type: string
          schema:
            description: The response of the list policy operation.
            properties:
              count:
                description: Total number of records
                type: integer
              nextLink:
                description: Next page link if any.
                type: string
              value:
                description: Policy Contract value.
                items:
                  $ref: '#/definitions/PolicyContract'
                type: array
        default:
          description: Error response describing why the operation failed.
          schema:
            description: Error Body contract.
            properties:
              code:
                description: Service-defined error code. This code serves as a sub-status for the HTTP error code specified in the response.
                type: string
              details:
                description: 'The list of invalid fields send in request, in case of validation error.'
                items:
                  $ref: '#/definitions/ErrorFieldContract'
                type: array
              message:
                description: Human-readable representation of the error.
                type: string
      tags:
        - ProductPolicy
      x-ms-examples:
        ApiManagementListProductsPolicies:
          parameters:
            $skip: 0
            $top: 10000
            Accept: application/json
            api-version: '2017-03-01'
            apimBaseUrl: apimservice1.management.azure-api.net
            productId: starter
          responses:
            '200':
              body:
                count: 1
                value:
                  - id: /policies/policy
                    policyContent: "<!--\r\n    IMPORTANT:\r\n    - Policy elements can appear only within the <inbound>, <outbound>, <backend> section elements.\r\n    - Only the <forward-request> policy element can appear within the <backend> section element.\r\n    - To apply a policy to the incoming request (before it is forwarded to the backend service), place a corresponding policy element within the <inbound> section element.\r\n    - To apply a policy to the outgoing response (before it is sent back to the caller), place a corresponding policy element within the <outbound> section element.\r\n    - To add a policy position the cursor at the desired insertion point and click on the round button associated with the policy.\r\n    - To remove a policy, delete the corresponding policy statement from the policy document.\r\n    - Policies are applied in the order of their appearance, from the top down.\r\n-->\r\n<policies>\r\n  <inbound />\r\n  <backend>\r\n    <forward-request />\r\n  </backend>\r\n  <outbound />\r\n</policies>"
  '/products/{productId}/policies/{policyId}':
    delete:
      description: Deletes the policy configuration at the Product.
      operationId: ProductPolicy_Delete
      parameters:
        - $ref: '#/parameters/ProductIdParameter'
        - description: The identifier of the Policy.
          enum:
            - policy
          in: path
          name: policyId
          required: true
          type: string
          x-ms-enum:
            modelAsString: true
            name: PolicyIdName
          x-ms-parameter-location: method
        - description: The entity state (Etag) version of the product policy to update. A value of "*" can be used for If-Match to unconditionally apply the operation.
          in: header
          name: If-Match
          required: true
          type: string
        - description: Version of the API to be used with the client request.
          in: query
          name: api-version
          required: true
          type: string
      responses:
        '204':
          description: Successfully deleted the policy configuration at the Product level.
        default:
          description: Error response describing why the operation failed.
          schema:
            description: Error Body contract.
            properties:
              code:
                description: Service-defined error code. This code serves as a sub-status for the HTTP error code specified in the response.
                type: string
              details:
                description: 'The list of invalid fields send in request, in case of validation error.'
                items:
                  $ref: '#/definitions/ErrorFieldContract'
                type: array
              message:
                description: Human-readable representation of the error.
                type: string
      tags:
        - ProductPolicy
      x-ms-examples:
        ApiManagementDeleteProductsPolicies:
          parameters:
            If-Match: '*'
            api-version: '2017-03-01'
            apimBaseUrl: apimservice1.management.azure-api.net
            policyId: policy
            productId: starter
          responses:
            '204': {}
    get:
      description: Get the policy configuration at the Product level.
      operationId: ProductPolicy_Get
      parameters:
        - description: Version of the API to be used with the client request.
          in: query
          name: api-version
          required: true
          type: string
        - $ref: '#/parameters/ProductIdParameter'
        - description: The identifier of the Policy.
          enum:
            - policy
          in: path
          name: policyId
          required: true
          type: string
          x-ms-enum:
            modelAsString: true
            name: PolicyIdName
          x-ms-parameter-location: method
      produces:
        - application/json
        - application/vnd.ms-azure-apim.policy+xml
        - application/vnd.ms-azure-apim.policy.raw+xml
      responses:
        '200':
          description: Product Policy information.
          headers:
            ETag:
              description: Current entity state version. Should be treated as opaque and used to make conditional HTTP requests.
              type: string
          schema:
            description: Policy contract Properties.
            properties:
              id:
                description: Policy identifier.
                type: string
              policyContent:
                description: Json escaped Xml Encoded contents of the Policy.
                type: string
            required:
              - policyContent
        default:
          description: Error response describing why the operation failed.
          schema:
            description: Error Body contract.
            properties:
              code:
                description: Service-defined error code. This code serves as a sub-status for the HTTP error code specified in the response.
                type: string
              details:
                description: 'The list of invalid fields send in request, in case of validation error.'
                items:
                  $ref: '#/definitions/ErrorFieldContract'
                type: array
              message:
                description: Human-readable representation of the error.
                type: string
      tags:
        - ProductPolicy
      x-ms-examples:
        ApiManagementGetProductsPolicies:
          parameters:
            Accept: application/json
            api-version: '2017-03-01'
            apimBaseUrl: apimservice1.management.azure-api.net
            policyId: policy
            productId: 5a58bf61a40f7e104892bda4
          responses:
            '200':
              body:
                id: /products/5a58bf61a40f7e104892bda4/policies/policy
                policyContent: "<policies>\r\n  <inbound>\r\n    <rate-limit calls=\"5\" renewal-period=\"60\" />\r\n    <quota calls=\"100\" renewal-period=\"604800\" />\r\n    <base />\r\n  </inbound>\r\n  <backend>\r\n    <base />\r\n  </backend>\r\n  <outbound>\r\n    <base />\r\n  </outbound>\r\n</policies>"
    put:
      consumes:
        - application/json
        - application/vnd.ms-azure-apim.policy+xml
        - application/vnd.ms-azure-apim.policy.raw+xml
      description: Creates or updates policy configuration for the Product.
      operationId: ProductPolicy_CreateOrUpdate
      parameters:
        - $ref: '#/parameters/ProductIdParameter'
        - description: The identifier of the Policy.
          enum:
            - policy
          in: path
          name: policyId
          required: true
          type: string
          x-ms-enum:
            modelAsString: true
            name: PolicyIdName
          x-ms-parameter-location: method
        - description: The policy contents to apply.
          in: body
          name: parameters
          required: true
          schema:
            description: Policy contract Properties.
            properties:
              id:
                description: Policy identifier.
                type: string
              policyContent:
                description: Json escaped Xml Encoded contents of the Policy.
                type: string
            required:
              - policyContent
        - description: Version of the API to be used with the client request.
          in: query
          name: api-version
          required: true
          type: string
      responses:
        '200':
          description: Product policy configuration of the tenant was successfully updated.
          schema:
            description: Policy contract Properties.
            properties:
              id:
                description: Policy identifier.
                type: string
              policyContent:
                description: Json escaped Xml Encoded contents of the Policy.
                type: string
            required:
              - policyContent
        '201':
          description: Product policy configuration was successfully created.
          schema:
            description: Policy contract Properties.
            properties:
              id:
                description: Policy identifier.
                type: string
              policyContent:
                description: Json escaped Xml Encoded contents of the Policy.
                type: string
            required:
              - policyContent
        default:
          description: Error response describing why the operation failed.
          schema:
            description: Error Body contract.
            properties:
              code:
                description: Service-defined error code. This code serves as a sub-status for the HTTP error code specified in the response.
                type: string
              details:
                description: 'The list of invalid fields send in request, in case of validation error.'
                items:
                  $ref: '#/definitions/ErrorFieldContract'
                type: array
              message:
                description: Human-readable representation of the error.
                type: string
      tags:
        - ProductPolicy
      x-ms-examples:
        ApiManagementPutProductsPolicies:
          parameters:
            api-version: '2017-03-01'
            apimBaseUrl: apimservice1.management.azure-api.net
            parameters:
              policyContent: "<policies>\r\n  <inbound>\r\n    <rate-limit calls=\"5\" renewal-period=\"60\" />\r\n    <quota calls=\"100\" renewal-period=\"604800\" />\r\n    <base />\r\n  </inbound>\r\n  <backend>\r\n    <base />\r\n  </backend>\r\n  <outbound>\r\n    <base />\r\n  </outbound>\r\n</policies>"
            policyId: policy
            productId: 5a58be7ba40f7e104892b23a
          responses:
            '200':
              body:
                id: /products/5a58be7ba40f7e104892b23a/policies/policy
                policyContent: "<policies>\r\n  <inbound>\r\n    <rate-limit calls=\"5\" renewal-period=\"60\" version=\"2\" />\r\n    <quota calls=\"100\" renewal-period=\"604800\" version=\"2\" />\r\n    <base />\r\n  </inbound>\r\n  <backend>\r\n    <base />\r\n  </backend>\r\n  <outbound>\r\n    <base />\r\n  </outbound>\r\n</policies>"
            '201':
              body:
                id: /products/5a58be7ba40f7e104892b23a/policies/policy
                policyContent: "<policies>\r\n  <inbound>\r\n    <rate-limit calls=\"5\" renewal-period=\"60\" version=\"2\" />\r\n    <quota calls=\"100\" renewal-period=\"604800\" version=\"2\" />\r\n    <base />\r\n  </inbound>\r\n  <backend>\r\n    <base />\r\n  </backend>\r\n  <outbound>\r\n    <base />\r\n  </outbound>\r\n</policies>"
  '/products/{productId}/subscriptions':
    get:
      description: Lists the collection of subscriptions to the specified product.
      operationId: ProductSubscriptions_List
      parameters:
        - $ref: '#/parameters/ProductIdParameter'
        - description: |-
            | Field        | Supported operators    | Supported functions                         |
            |--------------|------------------------|---------------------------------------------|
            | id           | ge, le, eq, ne, gt, lt | substringof, contains, startswith, endswith |
            | name         | ge, le, eq, ne, gt, lt | substringof, contains, startswith, endswith |
            | stateComment | ge, le, eq, ne, gt, lt | substringof, contains, startswith, endswith |
            | userId       | ge, le, eq, ne, gt, lt | substringof, contains, startswith, endswith |
            | productId    | ge, le, eq, ne, gt, lt | substringof, contains, startswith, endswith |
            | state        | eq                     |                                             |
          in: query
          name: $filter
          required: false
          type: string
        - description: Number of records to return.
          format: int32
          in: query
          minimum: 1
          name: $top
          required: false
          type: integer
          x-ms-parameter-location: method
        - description: Number of records to skip.
          format: int32
          in: query
          minimum: 0
          name: $skip
          required: false
          type: integer
          x-ms-parameter-location: method
        - description: Version of the API to be used with the client request.
          in: query
          name: api-version
          required: true
          type: string
      responses:
        '200':
          description: Lists a collection of subscription entities.
          schema:
            description: Paged Subscriptions list representation.
            properties:
              count:
                description: Total number of entities
                type: integer
              nextLink:
                description: Next page link if any.
                type: string
              value:
                description: Page values.
                items:
                  $ref: '#/definitions/SubscriptionContract'
                type: array
        default:
          description: Error response describing why the operation failed.
          schema:
            description: Error Body contract.
            properties:
              code:
                description: Service-defined error code. This code serves as a sub-status for the HTTP error code specified in the response.
                type: string
              details:
                description: 'The list of invalid fields send in request, in case of validation error.'
                items:
                  $ref: '#/definitions/ErrorFieldContract'
                type: array
              message:
                description: Human-readable representation of the error.
                type: string
      tags:
        - ProductSubscriptions
      x-ms-examples:
        ApiManagementListProductsSubscriptions:
          parameters:
            Accept: application/json
            api-version: '2017-03-01'
            apimBaseUrl: apimservice1.management.azure-api.net
            productId: 5a58bb65a40f7ef2e05bdc25
          responses:
            '200':
              body:
                count: 1
                value:
                  - createdDate: '2018-01-12T13:43:01.113Z'
                    id: /subscriptions/5a58bb65a40f7ef2e05bdc28
                    primaryKey: 2f3af2e4d2e64691bc221f8c4b93d7fd
                    productId: /products/5a58bb65a40f7ef2e05bdc25
                    secondaryKey: e48feb2c5e9045228cd4edca4ad49bfe
                    startDate: '2018-01-12T00:00:00Z'
                    state: active
                    userId: /users/1
      x-ms-odata: './apimsubscriptions.json#/definitions/SubscriptionContract'
      x-ms-pageable:
        nextLinkName: nextLink
definitions:
  ProductCollection:
    description: Paged Products list representation.
    properties:
      count:
        description: Total number of entities
        type: integer
      nextLink:
        description: Next page link if any.
        type: string
      value:
        description: Page values.
        items:
          $ref: '#/definitions/ProductContract'
        type: array
  ProductContract:
    allOf:
      - $ref: '#/definitions/ProductContractProperties'
    description: Product details.
    properties:
      id:
        description: Identifier of the Product entity.
        type: string
  ProductContractProperties:
    allOf:
      - $ref: '#/definitions/ProductEntityBaseParameters'
    description: Product profile.
    properties:
      name:
        description: Product name.
        maxLength: 300
        minLength: 1
        type: string
    required:
      - name
  ProductEntityBaseParameters:
    description: Product Entity Base Parameters
    properties:
      approvalRequired:
        description: "whether subscription approval is required. If\_false, new subscriptions will be approved automatically enabling developers to call the productâ€™s APIs immediately after subscribing. If\_true, administrators must manually approve the subscription before the developer can any of the productâ€™s APIs. Can be present only if subscriptionRequired property is present and has a value of false."
        type: boolean
      description:
        description: Product description. May include HTML formatting tags.
        maxLength: 1000
        minLength: 1
        type: string
      state:
        description: whether product is published or not. Published products are discoverable by users of developer portal. Non published products are visible only to administrators. Default state of Product is notPublished.
        enum:
          - notPublished
          - published
        type: string
        x-ms-enum:
          modelAsString: false
          name: ProductState
      subscriptionRequired:
        description: 'Whether a product subscription is required for accessing APIs included in this product. If true, the product is referred to as "protected" and a valid subscription key is required for a request to an API included in the product to succeed. If false, the product is referred to as "open" and requests to an API included in the product can be made without a subscription key. If property is omitted when creating a new product it''s value is assumed to be true.'
        type: boolean
      subscriptionsLimit:
        description: "Whether the number of subscriptions a user can have to this product at the same time. Set to\_null\_or omit to allow unlimited per user subscriptions. Can be present only if subscriptionRequired property is present and has a value of false."
        format: int32
        type: integer
      terms:
        description: Product terms of use. Developers trying to subscribe to the product will be presented and required to accept these terms before they can complete the subscription process.
        type: string
  ProductUpdateParameters:
    allOf:
      - $ref: '#/definitions/ProductEntityBaseParameters'
    description: Parameters supplied to the Update Product operation.
    properties:
      name:
        description: Product name.
        maxLength: 300
        minLength: 1
        type: string
x-ms-parameterized-host:
  hostTemplate: '{apimBaseUrl}'
  parameters:
    - description: 'The management endpoint of the API Management service, for example https://myapimservice.management.azure-api.net.'
      in: path
      name: apimBaseUrl
      required: true
      type: string
      x-ms-skip-url-encoding: true
  positionInOperation: first
  useSchemePrefix: false
